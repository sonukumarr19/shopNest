<div class="p-4">
  <!-- HERO CAROUSEL SECTION -->
  <div class="relative w-full h-96 md:h-[500px] mb-8 rounded-2xl overflow-hidden shadow-2xl"
       (mouseenter)="onCarouselMouseEnter()"
       (mouseleave)="onCarouselMouseLeave()">
    
    <!-- Carousel Container -->
    <div class="relative w-full h-full">
      <!-- Slides -->
      <div *ngFor="let slide of carouselSlides; let i = index; trackBy: trackBySlideId"
           class="absolute inset-0 transition-opacity duration-1000 ease-in-out"
           [class.opacity-100]="currentSlide === i"
           [class.opacity-0]="currentSlide !== i"
           [class.pointer-events-none]="currentSlide !== i"
           [attr.data-slide-index]="i">
        
        <!-- Background with Gradient Overlay -->
        <div class="absolute inset-0 bg-gradient-to-r opacity-90" 
             [ngClass]="slide.bgGradient"></div>
        <img [src]="slide.image" 
             [alt]="slide.title"
             class="w-full h-full object-cover">
        
        <!-- Content Overlay -->
        <div class="absolute inset-0 flex items-center justify-center md:justify-start">
          <div class="text-center md:text-left md:ml-16 text-white max-w-2xl px-6 md:px-0">
            <h1 class="text-4xl md:text-6xl font-bold mb-4 animate-fade-in-up">
              {{ slide.title }}
            </h1>
            <h2 class="text-2xl md:text-3xl font-semibold mb-4 text-yellow-300 animate-fade-in-up animation-delay-200">
              {{ slide.subtitle }}
            </h2>
            <p class="text-lg md:text-xl mb-8 opacity-90 animate-fade-in-up animation-delay-400">
              {{ slide.description }}
            </p>
            <button *ngIf="currentSlide === i"
                class="bg-white text-gray-800 font-bold py-4 px-8 rounded-full text-lg hover:bg-gray-100 transform hover:scale-105 transition-all duration-300 shadow-lg animate-fade-in-up animation-delay-600"
                [attr.data-slide-index]="i"
                [attr.data-category-id]="slide.categoryId"
                (click)="searchProducts(slide.categoryId, $event)">
              {{ slide.buttonText }}
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Navigation Arrows -->
    <button (click)="prevSlide()"
            class="absolute left-4 top-1/2 transform -translate-y-1/2 bg-white bg-opacity-20 hover:bg-opacity-30 text-black p-3 rounded-full backdrop-blur-sm transition-all duration-300 hover:scale-110">
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
      </svg>
    </button>
    
    <button (click)="nextSlide()"
            class="absolute right-4 top-1/2 transform -translate-y-1/2 bg-white bg-opacity-20 hover:bg-opacity-30 text-black p-3 rounded-full backdrop-blur-sm transition-all duration-300 hover:scale-110">
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
      </svg>
    </button>

    <!-- Dot Indicators -->
    <div class="absolute bottom-6 left-1/2 transform -translate-x-1/2 flex space-x-3">
      <button *ngFor="let slide of carouselSlides; let i = index"
              (click)="goToSlide(i)"
              class="w-3 h-3 rounded-full transition-all duration-300"
              [class.bg-white]="currentSlide === i"
              [class.bg-white-opacity-50]="currentSlide !== i"
              [class.scale-125]="currentSlide === i">
      </button>
    </div>

    <!-- Progress Bar -->
    <div class="absolute bottom-0 left-0 w-full h-1 bg-white bg-opacity-30">
      <div class="h-full bg-white transition-all duration-300 ease-linear"
           [style.width.%]="((currentSlide + 1) / carouselSlides.length) * 100">
      </div>
    </div>
  </div>

  <!-- NEW PRODUCTS SECTION -->
  <div class="mb-16">
    <!-- Section Header -->
    <div class="text-center mb-12">
      <div class="inline-block">
        <h2 class="text-4xl md:text-5xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent mb-4">
          New Products
        </h2>
        <div class="w-24 h-1 bg-gradient-to-r from-blue-600 to-purple-600 rounded-full mx-auto mb-6"></div>
        <p class="text-gray-600 text-lg max-w-2xl mx-auto">
          Discover the latest additions to our collection with amazing deals and exclusive offers
        </p>
      </div>
    </div>
    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
      <div *ngFor="let product of newProducts" class="bg-white rounded-2xl shadow-md p-4 flex flex-col">
        <div class="relative w-full h-[500px] rounded-t-xl overflow-hidden">
          <img [src]="product.images[0]" alt="{{ product.name }}" class="w-full h-full object-contain" 
          [routerLink]="'product/' + product._id"/>

          <!-- Wishlist icon button -->
          <button 
              class="absolute top-3 right-3 w-10 h-10 bg-white bg-opacity-90 hover:bg-opacity-100 rounded-full flex items-center justify-center shadow-xl transition"
              (click)="addToWishList(product)" 
          >
            @if (isInWishList(product)) {
              <i class="material-icons text-red-500 text-[20px] ">favorite</i>
            }@else {
              <i class="material-icons text-red-500 text-[20px] ">favorite_border</i>
            }
          </button>

          <div class="absolute top-4 left-4 bg-gradient-to-r from-red-500 to-pink-500 text-white px-3 py-1 rounded-full text-sm font-semibold shadow-lg animate-pulse">
                NEW
          </div>
        </div>

        <h3 class="text-lg font-semibold truncate max-w-full" title="{{ product.name }}">
          {{ product.name }}
        </h3>

        <!-- Price Section -->
        <div class="mb-6">
            <div class="flex items-center gap-3 mb-2">
            <span class="text-md text-gray-400 line-through">₹{{ product.price }}</span>
            <span class="bg-green-100 text-green-800 px-2 py-1 rounded-lg text-sm font-semibold">
                {{ product.discount }}% OFF
            </span>
            </div>
            <div class="flex items-baseline gap-2">
            <span class="text-sm font-medium text-gray-600">Special Price:</span>
            <span class="text-xl text-green-600 font-bold">
                ₹{{ (product.price - product.discount * product.price / 100) | number : '1.0-0' }}
            </span>
            </div>
        </div>

        <div class="mt-auto flex justify-between items-center gap-4">
          <!-- Add to Cart Button -->
          <button class="flex items-center gap-2 bg-cyan-900 hover:bg-blue-700 text-white px-5 py-2 rounded-lg font-medium text-sm shadow-md transition duration-200">
              <i class="material-icons text-base">add_shopping_cart</i>
              Add to Cart
          </button>

          <!-- Buy Button -->
          <button class="flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white px-7 py-2 rounded-lg font-medium text-sm shadow-md transition duration-200">
              <i class="material-icons text-base">shopping_cart</i>
              Buy
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- FEATURED PRODUCTS SECTION -->
  <div class="mb-16">
    <!-- Section Header -->
    <div class="text-center mb-12">
      <div class="inline-block mt-5">
        <h2 class="text-4xl md:text-5xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent mb-4">
          Featured Products
        </h2>
        <div class="w-24 h-1 bg-gradient-to-r from-purple-600 to-pink-600 rounded-full mx-auto mb-6"></div>
        <p class="text-gray-600 text-lg max-w-2xl mx-auto">
          Handpicked selections from our premium collection, featuring the best deals and top-rated items
        </p>
      </div>
    </div>
    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
      <div *ngFor="let product of featuredProducts" class="bg-white rounded-2xl shadow-md p-4 flex flex-col">
        <div class="relative w-full h-[500px] rounded-t-xl overflow-hidden">
          <img [src]="product.images[0]" alt="{{ product.name }}" class="w-full h-full object-contain" 
          [routerLink]="'product/' + product._id"/>

          <!-- Wishlist icon button -->
          <button 
              class="absolute top-3 right-3 w-10 h-10 bg-white bg-opacity-90 hover:bg-opacity-100 rounded-full flex items-center justify-center shadow-xl transition"
              (click)="addToWishList(product)" 
          >
            @if (isInWishList(product)) {
              <i class="material-icons text-red-500 text-[20px] ">favorite</i>
            }@else {
              <i class="material-icons text-red-500 text-[20px] ">favorite_border</i>
            }
          </button>

          <!-- Featured Badge -->
          <div class="absolute top-4 left-4 bg-gradient-to-r animate-pulse from-purple-500 to-pink-500 text-white px-3 py-1 rounded-full text-sm font-semibold shadow-lg">
              <svg class="w-4 h-4 inline-block mr-1" fill="currentColor" viewBox="0 0 20 20">
              <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path>
              </svg>
              FEATURED
          </div>
        </div>

        <h3 class="text-lg font-semibold truncate max-w-full" title="{{ product.name }}">
          {{ product.name }}
        </h3>

        <!-- Price Section -->
        <div class="mb-6">
            <div class="flex items-center gap-3 mb-2">
            <span class="text-md text-gray-400 line-through">₹{{ product.price }}</span>
            <span class="bg-green-100 text-green-800 px-2 py-1 rounded-lg text-sm font-semibold">
                {{ product.discount }}% OFF
            </span>
            </div>
            <div class="flex items-baseline gap-2">
            <span class="text-sm font-medium text-gray-600">Special Price:</span>
            <span class="text-xl text-green-600 font-bold">
                ₹{{ (product.price - product.discount * product.price / 100) | number : '1.0-0' }}
            </span>
            </div>
        </div>
        <div class="mt-auto flex justify-between items-center gap-4">
          <!-- Add to Cart Button -->
          <button class="flex items-center gap-2 bg-cyan-900 hover:bg-blue-700 text-white px-5 py-2 rounded-lg font-medium text-sm shadow-md transition duration-200">
              <i class="material-icons text-base">add_shopping_cart</i>
              Add to Cart
          </button>

          <!-- Buy Button -->
          <button class="flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white px-7 py-2 rounded-lg font-medium text-sm shadow-md transition duration-200">
              <i class="material-icons text-base">shopping_cart</i>
              Buy
          </button>
        </div>
      </div>
    </div>
  </div>
</div>